<script>

const icons = {
    more: 'assets/images/expand_more_black_24dp.svg',
    less: 'assets/images/expand_less_black_24dp.svg',
    menu: 'assets/images/menu_book_black_24dp.svg',
    close: 'assets/images/close_black_24dp.svg',
}

switchDoc(location.hash);

window.onhashchange = () => {
    switchDoc(location.hash);
}

function switchDoc(path) {

    if (!path) {
        window.location.hash = document.getElementsByClassName('markdown')[0].id;
        return;
    }

    path = path.replace(/\#/g, '');

    let anchors = path.split('+');
    let docAnchor = anchors.length < 2 ? anchors[0] : anchors[0].concat('+', anchors[1]);
    let headerAnchor = anchors.length == 3 ? anchors[2] : null;

    let docs = document.getElementsByClassName('markdown');

    for (let doc of docs) {

        if (doc.id != docAnchor) {
            doc.classList.add('hidden');
        } else {
            doc.classList.remove('hidden');
            if (headerAnchor) {
                document.getElementsByName(path)[0].scrollIntoView();
            } else {
                doc.parentElement.scrollTop = 0;
            }
        }

    }
}

function toggleMenu() {

    const menu = document.querySelector('.nav-menu');
    toggleItem(menu);

    const menuIcon = document.querySelector('.nav-headerIcon');
    menuIcon.src = menuIcon.getAttribute('src') == icons.menu ? icons.close : icons.menu;

}

function toggleSubMenu(folderHeader, expandIcon) {

    const submenu = document.getElementById('subMenu_' + folderHeader);
    toggleItem(submenu);

    expandIcon.src = expandIcon.getAttribute('src') == icons.more ? icons.less : icons.more;

}

function toggleItem(item) {
    item.style.display = window.getComputedStyle(item).display == "none" ? "block" : "";
}

</script>